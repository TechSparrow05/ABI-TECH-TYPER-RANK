<!-- Updated with animated design, paragraph fix, and bottom stats -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ABI TECH TYPER RANK</title>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
 <link rel="icon" type="image/png" href="favicon.png" />
   <meta name="theme-color" content="#a259ff">


  <style>
    :root {
      --mat-purple: #a259ff;
      --elegant-black: #121212;
      --mat-white: #e0e0e0;
      --text-gray: #aaaaaa;
      --success: #4caf50;
      --error: #f44336;
      --neon: #a259ff;
    }
    html, body {
      height: 100%;
      width: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Fira Code', monospace;
      overflow-x: hidden;
    }
    body.default { background-color: var(--elegant-black); color: var(--mat-white); }
    body.dark { background-color: #121212; color: var(--mat-white); }
    body.light { background-color: #f5f5f5; color: #333; }
    * { box-sizing: border-box; }
    body {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      padding: 20px;
    }
    header {
      font-size: 2.5rem;
      margin-bottom: 10px;
      color: var(--mat-purple);
      text-shadow: 0 0 12px var(--neon);
      text-align: center;
      animation: pulse 2s infinite alternate;
    }
    #controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      gap: 10px;
      width: 100%;
      max-width: 1100px;
      margin-bottom: 20px;
    }
    #controls button, #controls select {
  padding: 10px;
  font-size: 1rem;
  background: rgba(162, 89, 255, 0.2);
  backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 10px;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 0 10px rgba(162,89,255,0.3);
}

	#controls button:hover,
	#controls select:hover {
  transform: scale(1.06);
  box-shadow: 0 0 20px rgba(162,89,255,0.8);
}

    #controls button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 10px var(--neon);
    }
    #typing-box {
      background: rgba(31, 31, 31, 0.9);
      padding: 30px;
      border-radius: 10px;
      width: 100%;
      max-width: 1000px;
      font-size: 1.5rem;
      box-shadow: 0 0 15px var(--neon);
      margin-bottom: 20px;
      min-height: 120px;
      display: flex;
      flex-wrap: wrap;
    }
    #input {
      width: 100%;
      font-size: 1.5rem;
      border: none;
      outline: none;
      background: transparent;
      color: inherit;
      margin-bottom: 20px;
      padding: 10px;
    }
    .correct { color: var(--success); }
    .incorrect { color: var(--error); }
    #stats {
      position: fixed;
      bottom: 10px;
      display: flex;
      justify-content: space-around;
      align-items: center;
      flex-wrap: wrap;
      width: 100%;
      max-width: 1000px;
      font-size: 1.1rem;
      color: var(--text-gray);
      background: rgba(0,0,0,0.4);
      padding: 10px;
      border-radius: 10px;
      backdrop-filter: blur(6px);
    }

    @keyframes neonGlow {
      0% { filter: hue-rotate(0deg); }
      100% { filter: hue-rotate(360deg); }
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      100% { transform: scale(1.05); }
    }
    @media screen and (max-width: 768px) {
      #typing-box { font-size: 1.2rem; padding: 20px; }
      #controls { grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); }
      #input { font-size: 1.2rem; }
      #stats { font-size: 1rem; }
    }
	#typing-box {
	  background: rgba(31, 31, 31, 0.25);
	  border-radius: 16px;
	  padding: 30px;
	  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
	  backdrop-filter: blur(12px);
	  -webkit-backdrop-filter: blur(12px);
	  border: 1px solid rgba(255, 255, 255, 0.15);
	  width: 100%;
	  max-width: 1000px;
	  height: 250px;
	  font-size: 1.5rem;
	  overflow-y: auto;               /* ✅ Enables vertical scroll */
	  overflow-x: hidden;             /* ✅ Prevent horizontal scroll */
	  display: flex;
	  flex-wrap: wrap;
	  align-content: flex-start;      /* ✅ Align content to top */
	  justify-content: flex-start;
	  gap: 10px;
	  line-height: 2rem;              /* ✅ Add line spacing */
	  text-align: left;
	  white-space: normal;            /* ✅ Allow line wrapping */
	  word-break: break-word;         /* ✅ Break long words */
	}
	#typing-box::-webkit-scrollbar {
	  width: 6px;
	}
	#typing-box::-webkit-scrollbar-thumb {
	  background-color: #a259ff;
	  border-radius: 10px;
	}
	#typing-box::-webkit-scrollbar-track {
	  background: transparent;
	}


	#input {
	  width: 60%;
	  font-size: 1.5rem;
	  border: none;
	  outline: none;
	  background: transparent;
	  color: inherit;
	  margin-top: 10px;
	  padding: 12px;
	  text-align: center;
	}
	.theme-switch {
	  position: relative;
	  display: inline-block;
	  width: 60px;
	  height: 34px;
	}
	.theme-switch input {
	  opacity: 0;
	  width: 0;
	  height: 0;
	}
	.slider {
	  position: absolute;
	  cursor: pointer;
	  top: 0; left: 0; right: 0; bottom: 0;
	  background-color: #ccc;
	  transition: 0.4s;
	  border-radius: 34px;
	}
	.slider:before {
	  position: absolute;
	  content: "";
	  height: 26px; width: 26px;
	  left: 4px; bottom: 4px;
	  background-color: white;
	  transition: 0.4s;
	  border-radius: 50%;
	}
	input:checked + .slider {
	  background-color: #a259ff;
	}
	input:checked + .slider:before {
	  transform: translateX(26px);
	}
	#stats {
	  position: fixed;
	  bottom: 10px;
	  display: flex;
	  justify-content: space-around;
	  align-items: center;
	  flex-wrap: wrap;
	  width: 100%;
	  max-width: 1000px;
	  font-size: 1.1rem;
	  color: var(--text-gray);
	  background: rgba(0,0,0,0.25);
	  backdrop-filter: blur(8px);
	  border: 1px solid rgba(255,255,255,0.1);
	  padding: 10px;
	  border-radius: 15px;
	}
		body.star-bg::after {
	  content: '';
	  position: fixed;
	  top: 0; left: 0;
	  width: 100%; height: 100%;
	  z-index: -2;
	  background: transparent;
	  background-image: radial-gradient(circle, rgba(255,255,255,0.7) 1px, transparent 1px);
	  background-size: 2px 2px;
	  animation: starField 20s linear infinite;
	  pointer-events: none;
	  opacity: 0.5;
	  mix-blend-mode: screen;
	}

	@keyframes starField {
	  0% { background-position: 0 0; }
	  100% { background-position: -1000px 1000px; }
	}
	body.star-bg::after {
	  content: '';
	  position: fixed;
	  top: 0; left: 0;
	  width: 100%; height: 100%;
	  background-image: url('star.png'); /* Replace with actual path */
	  background-repeat: repeat;
	  background-size: 60px;
	  opacity: 0.3;
	  animation: starFall 30s linear infinite;
	  pointer-events: none;
	  z-index: -1;
	}
	@keyframes starFall {
	  0% { background-position: 0 0; }
	  100% { background-position: 0 1000px; }
	}
	.site-logo {
	  width: 120px;
	  height: auto;
	  margin-bottom: 10px;
	  border-radius: 50%;
	  box-shadow: 0 0 20px var(--neon);
	  animation: float 3s ease-in-out infinite;
	}

	.corner-logo {
	  position: fixed;
	  top: 15px;
	  left: 20px;
	  width: 60px;
	  height: auto;
	  z-index: 1000;
	  border-radius: 50%;
	  box-shadow: 0 0 15px var(--neon);
	  transition: transform 0.3s ease;
	}
	.corner-logo:hover {
	  transform: scale(1.1) rotate(2deg);
	}


	@keyframes float {
	  0%, 100% { transform: translateY(0); }
	  50% { transform: translateY(-6px); }
	}
	@media screen and (max-width: 768px) {
	  .corner-logo {
		width: 45px;
		top: 10px;
		left: 10px;
	  }
	}

	@media screen and (max-width: 768px) {
	  .site-logo { width: 90px; }
	}




  </style>
</head>
<body class="default">

 <img src="ABI TECH LOGO.png" alt="ABI TECH Logo" class="corner-logo" />

<header>ABI TECH TYPER RANK</header>

  <div id="controls">
	<button onclick="toggleStars()">Toggle Stars</button>
    <button onclick="changeTime(-10)">-10s</button>
    <button onclick="changeTime(10)">+10s</button>
    <button onclick="restartTest()">Restart</button>
    <button onclick="shuffleWords()">Shuffle</button>
    <button onclick="setTheme('default')">Default</button>
	<button onclick="setTheme('dark')">Dark</button>
	<button onclick="setTheme('light')">Light</button>
    <button onclick="loadWords('easy')">Beginner</button>
    <button onclick="loadWords('hard')">Advanced</button>
    <button onclick="customWords()">Custom</button>
    <button onclick="loadParagraphMode()">Paragraph</button>
    <select onchange="changeLanguage(this.value)">
      <option value="english">English</option>
      <option value="tamil">Tamil</option>
      <option value="malayalam">Malayalam</option>
      <option value="kannada">Kannada</option>
    </select>
  </div>
  <div id="typing-box"></div>
  <input id="input" placeholder="Start typing..." autofocus autocomplete="off" />
  <div id="stats">
  <label class="theme-switch">
  <input type="checkbox" id="themeToggle" onchange="toggleTheme()" />
  <span class="slider"></span>
</label>
    <span>WPM: <span id="wpm">0</span></span>
    <span>Accuracy: <span id="accuracy">100%</span></span>
    <span>Mistakes: <span id="mistakes">0</span></span>
    <span>Time: <span id="timer">30</span>s</span>
  </div>
  <script>
    let words = [], currentWordIndex = 0, correctChars = 0, mistakes = 0, timer = 30, interval = null;
    const typingBox = document.getElementById("typing-box"), input = document.getElementById("input"),
          wpmEl = document.getElementById("wpm"), accuracyEl = document.getElementById("accuracy"),
          mistakesEl = document.getElementById("mistakes"), timerEl = document.getElementById("timer");

    function setTheme(theme) { document.body.className = theme; }
    function changeTime(amount) { timer = Math.max(10, timer + amount); timerEl.textContent = timer; }
    function renderWords() {
      typingBox.innerHTML = words.map((w,i) => `<span class='word' id='word-${i}'>${w}</span>`).join(" ");
    }
    function updateStats() {
      const total = correctChars + mistakes;
      accuracyEl.textContent = (total > 0 ? (correctChars / total * 100).toFixed(0) : 100) + "%";
      wpmEl.textContent = Math.round((correctChars / 5) / ((30 - timer) / 60));
      mistakesEl.textContent = mistakes;
    }
	const elapsed = 30 - timer;
const wpm = elapsed > 0 ? Math.round((correctChars / 5) / (elapsed / 60)) : 0;
wpmEl.textContent = wpm;

    function startTimer() {
      clearInterval(interval);
      interval = setInterval(() => {
        timer--;
        timerEl.textContent = timer;
        if (timer <= 0) {
          clearInterval(interval);
          input.disabled = true;
        }
      }, 1000);
    }
    function restartTest() {
      loadWords(); input.disabled = false; input.value = ""; input.focus(); clearInterval(interval);
    }
    function shuffleWords() {
      for (let i = words.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [words[i], words[j]] = [words[j], words[i]];
      }
      currentWordIndex = 0; correctChars = 0; mistakes = 0; renderWords(); updateStats(); input.value = "";
    }
    function loadWords(level = 'easy') {
      const easy = "the cat ran fast to the wall and jumped over a box";
      const hard = "synchronize functionality development integration abstraction algorithm debugging";
      words = (level === 'easy' ? easy : hard).split(" ");
      currentWordIndex = correctChars = mistakes = 0;
      timer = 30; input.disabled = false; input.value = "";
      renderWords(); updateStats(); timerEl.textContent = timer;
    }
    function customWords() {
      const custom = prompt("Enter custom words:");
      if (custom) {
        words = custom.trim().split(" "); restartTest();
      }
    }
    function loadParagraphMode() {
      const paragraph = "Typing is a skill that improves with consistent practice and patience. Keep going.";
      words = paragraph.split(" "); restartTest();
    }
    function changeLanguage(lang) {
      const sample = {
        english: "the quick brown fox jumps over the lazy dog",
        tamil: "வணக்கம் நண்பா நீங்கள் எப்படி இருக்கிறீர்கள்",
        malayalam: "സുഖമാണോ നിങ്ങളുടെ തലപ്പൊട്ടു കേടായി",
        kannada: "ನಮಸ್ಕಾರ ಹೇಗಿದ್ದೀರಾ ನಿಮ್ಮ ಆರೋಗ್ಯ ಹೇಗೆ ಇದೆ"
      };
      words = sample[lang].split(" "); restartTest();
			}
			input.addEventListener("input", () => {
		  if (!interval) startTimer();
		  const current = words[currentWordIndex];
		  const typed = input.value;
		  const currentSpan = document.getElementById(`word-${currentWordIndex}`);
		  currentSpan.innerHTML = "";

		  for (let i = 0; i < current.length; i++) {
			const span = document.createElement("span");
			span.textContent = current[i];
			if (typed[i] == null) {
			  span.classList.remove("correct", "incorrect");
			} else if (typed[i] === current[i]) {
			  span.classList.add("correct");
			  correctChars++;
			} else {
			  span.classList.add("incorrect");
			  mistakes++;
			}
			currentSpan.appendChild(span);
		  }

		  if (typed.endsWith(" ")) {
			input.value = "";
			currentWordIndex++;
		  }

		  updateStats();

		  // ✅ Auto-end and restart logic
		  if (currentWordIndex >= words.length) {
			clearInterval(interval);
			input.disabled = true;
			setTimeout(() => {
			  restartTest();
			}, 2000);
		  }
		});


		function loadParagraphMode() {
		  const para = `Typing is a valuable skill that enhances both speed and accuracy in digital communication.
		  Practicing with long paragraphs can significantly boost your ability to maintain focus and reduce typing errors.
		  This paragraph is intentionally long, approximately 500 to 1000 characters, to simulate real-world typing scenarios.
		  Keep practicing and you’ll see continuous improvement in your typing speed and overall efficiency.`.replace(/\n/g, ' ');

		  words = para.trim().split(" ");
		  restartTest();
		  document.querySelector("select").disabled = true; // Disable language dropdown
		}
		function restartTest() {
		  input.disabled = false;
		  input.value = "";
		  input.focus();
		  clearInterval(interval);
		  renderWords();
		  updateStats();
		  timerEl.textContent = timer;
		  document.querySelector("select").disabled = false; // Enable dropdown when not paragraph
		}

		function toggleTheme() {
		  const isDark = document.body.classList.contains('dark');
		  if (isDark) {
			setTheme('light');
		  } else {
			setTheme('dark');
		  }
		  document.getElementById('themeToggle').checked = !isDark;
		}
		function setTheme(theme) {
		  document.body.className = theme;
		}
		function toggleStars() {
	  document.body.classList.toggle("star-bg");
	}


		 document.addEventListener('contextmenu', function (e) {
			e.preventDefault();
		  });

	</script>

		<footer class="footer">
		  © 2025 <strong>ABI-TECH</strong>. All rights reserved.
		</footer>

	</body>
</html>
